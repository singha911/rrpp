var beaconHostname="infinityid.condenastdigital.com";function setOptions(n,e){return n.push("expires="+e.expires),n.push("path="+e.path),n=(!e.domain||n.push("domain="+e.domain))&&n,(!e.secure||n.push("secure"))&&n}var cookie={get:function(n){for(var e,o=document.cookie.split("; "),t=0;t<o.length;t++)if((e=o[t].split("="))[0]===n)return decodeURIComponent(e[1]);return!1},set:function(n,e,o){if(n)return e=e||!0,e=[n=n+"="+((o=o||{}).encode,encodeURIComponent(e))],o.path=o.path||"/",o.expires=new Date(+new Date+36e5*o.expires),e=setOptions(e,o),document.cookie=e.join("; "),n}};function ajax(n){return new Promise((function(e,o){var t=new XMLHttpRequest;t.open("GET",n.URL),t.withCredentials=n.cors||!1,t.onreadystatechange=function(){4===this.readyState&&(200<=this.status&&this.status<300?e(this.responseText):o(new Error(this)))},t.send()}))}function resetOurXid(){return ajax({URL:"//infinityid.condenastdigital.com/?rand="+Date.now(),cors:!0}).then((function(n){return n&&cookie.set("CN_xid",n,{path:"/",expires:4320}),n})).catch((function(n){console.log("error resetting xid",n)}))}function propagateXid(n){var e=cookie.get("CN_xid");return!(!e||window.location.hostname===n)&&new Promise((function(o,t){var i=new Image;i.onerror=function(e){console.warn("[ hotzones ads plugin 4d ] XID not propagated for ",n,e),n===beaconHostname?resetOurXid().then((function(n){o(n)})):t()},i.onload=function(){o()},i.src="https://"+n+"/infinityid/beacon?id="+encodeURIComponent(e)}))}function pixel(n){var e,o;function t(){e.forEach((function(n){propagateXid(n)}))}function i(){var n=propagateXid(beaconHostname);n&&n.then(t)}cookie.get("xid1")&&(e=["www.allure.com","www.architecturaldigest.com","www.bonappetit.com","www.cntraveler.com","www.epicurious.com","www.glamour.com","www.gq.com","www.newyorker.com","pitchfork.com","www.self.com","www.teenvogue.com","www.them.us","www.vanityfair.com","www.vogue.com","www.wired.com"],o=document.readyState,(document.attachEvent?"complete"===o:"loading"!==o)?i():document.addEventListener("DOMContentLoaded",i))}window.cns&&window.cns.config&&window.cns.config.plugins&&window.cns.config.plugins["4d_xid_pixels"]&&window.cns.config.plugins["4d_xid_pixels"].enabled&&pixel();